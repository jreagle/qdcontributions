name: qdContributionsAPI

on:
  workflow_dispatch:

jobs:
  list-issues:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        id: graphql
        with:
          script: |
            const query = `query searchContributions($q: String!) {
              search(query: $q, type:ISSUE, first: 50) {
                codeCount
                issueCount
                }
              }`;
            const variables = {
              q: "'Cotrigua√ßu' OR 5103379 OR mt_cotriguacu repo:okfn-brasil/querido-diario"
            }
            const result = await github.graphql(query, variables)
            console.log(result)
            return result
            
      - name: Get Result
        run: "echo 'latest release: ${{ steps.graphql.outputs.result }}'"
